# ğŸ³ Docker ì»¨í…Œì´ë„ˆí™” ê°€ì´ë“œ

ì´ ë¬¸ì„œëŠ” AI ì»¤ë²„ë ˆí„° ìƒì„±ê¸°ì˜ Docker ì»¨í…Œì´ë„ˆí™” êµ¬ì¡°ì™€ êµ¬í˜„ ë°©ë²•ì„ ìƒì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

1. [ì „ì²´ ì•„í‚¤í…ì²˜](#ì „ì²´-ì•„í‚¤í…ì²˜)
2. [ì»¨í…Œì´ë„ˆ êµ¬ì¡°](#ì»¨í…Œì´ë„ˆ-êµ¬ì¡°)
3. [ë„¤íŠ¸ì›Œí¬ êµ¬ì„±](#ë„¤íŠ¸ì›Œí¬-êµ¬ì„±)
4. [ë³¼ë¥¨ ê´€ë¦¬](#ë³¼ë¥¨-ê´€ë¦¬)
5. [í™˜ê²½ ë³€ìˆ˜](#í™˜ê²½-ë³€ìˆ˜)
6. [ë¹Œë“œ í”„ë¡œì„¸ìŠ¤](#ë¹Œë“œ-í”„ë¡œì„¸ìŠ¤)
7. [ë°°í¬ ì „ëµ](#ë°°í¬-ì „ëµ)
8. [ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…](#ëª¨ë‹ˆí„°ë§-ë°-ë¡œê¹…)
9. [ë³´ì•ˆ ê³ ë ¤ì‚¬í•­](#ë³´ì•ˆ-ê³ ë ¤ì‚¬í•­)
10. [ì„±ëŠ¥ ìµœì í™”](#ì„±ëŠ¥-ìµœì í™”)

## ğŸ—ï¸ ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Docker Architecture                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                    Frontend Container                              â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚     â”‚
â”‚  â”‚  â”‚   React     â”‚    â”‚   Nginx     â”‚    â”‚   Static    â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   Build     â”‚â”€â”€â”€â–¶â”‚   Server    â”‚â”€â”€â”€â–¶â”‚   Files     â”‚             â”‚     â”‚
â”‚  â”‚  â”‚             â”‚    â”‚   (Port 80) â”‚    â”‚             â”‚             â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â”‚ HTTP/API Requests                      â”‚
â”‚                                    â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Backend Container                                â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚    â”‚
â”‚  â”‚  â”‚   FastAPI   â”‚    â”‚   Python    â”‚    â”‚   AI/ML     â”‚              â”‚    â”‚
â”‚  â”‚  â”‚   Server    â”‚â”€â”€â”€â–¶â”‚   Runtime   â”‚â”€â”€â”€â–¶â”‚   Pipeline  â”‚              â”‚    â”‚
â”‚  â”‚  â”‚ (Port 8000) â”‚    â”‚             â”‚    â”‚             â”‚              â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â”‚ Data Persistence                       â”‚
â”‚                                    â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Docker Volumes                                   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚   uploads   â”‚  â”‚job_postings â”‚  â”‚cover_lettersâ”‚  â”‚ chroma_db   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚   _data     â”‚  â”‚   _data     â”‚  â”‚   _data     â”‚  â”‚   _data     â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ 
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ ì»¨í…Œì´ë„ˆ êµ¬ì¡°

### Frontend Container (`coverletter-frontend`)

#### ë©€í‹°ìŠ¤í…Œì´ì§€ ë¹Œë“œ êµ¬ì¡°
```dockerfile
# Stage 1: Build Stage
FROM node:18-alpine as build
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build

# Stage 2: Production Stage
FROM nginx:alpine
COPY nginx.conf /etc/nginx/nginx.conf
COPY --from=build /app/build /usr/share/nginx/html
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

#### íŠ¹ì§•
- **Node.js 18 Alpine**: ê°€ë²¼ìš´ Node.js ëŸ°íƒ€ì„
- **Nginx**: ê³ ì„±ëŠ¥ ì›¹ ì„œë²„ ë° ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ
- **ì •ì  íŒŒì¼ ì„œë¹™**: React ë¹Œë“œ ê²°ê³¼ë¬¼ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì„œë¹™
- **API í”„ë¡ì‹œ**: `/api/*` ìš”ì²­ì„ ë°±ì—”ë“œë¡œ ì „ë‹¬

#### Nginx ì„¤ì •
```nginx
# API ìš”ì²­ì„ ë°±ì—”ë“œë¡œ í”„ë¡ì‹œ
location /api/ {
    proxy_pass http://backend:8000/api/;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}

# SPA ë¼ìš°íŒ… ì§€ì›
location / {
    try_files $uri $uri/ /index.html;
}
```

### Backend Container (`coverletter-backend`)

#### ë‹¨ì¼ ìŠ¤í…Œì´ì§€ ë¹Œë“œ
```dockerfile
FROM python:3.11-slim
WORKDIR /app

# ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
RUN apt-get update && apt-get install -y \
    gcc g++ && rm -rf /var/lib/apt/lists/*

# Python ì˜ì¡´ì„± ì„¤ì¹˜
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ ë³µì‚¬
COPY . .

# í•„ìš”í•œ ë””ë ‰í† ë¦¬ ìƒì„±
RUN mkdir -p uploads job_postings cover_letters

EXPOSE 8000
ENV PYTHONPATH=/app
ENV PYTHONUNBUFFERED=1

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
```

#### íŠ¹ì§•
- **Python 3.11 Slim**: ìµœì í™”ëœ Python ëŸ°íƒ€ì„
- **FastAPI**: ê³ ì„±ëŠ¥ ì›¹ í”„ë ˆì„ì›Œí¬
- **Uvicorn**: ASGI ì„œë²„
- **ì˜ì¡´ì„± ê´€ë¦¬**: requirements.txt ê¸°ë°˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜

## ğŸŒ ë„¤íŠ¸ì›Œí¬ êµ¬ì„±

### Docker Network
```yaml
networks:
  coverletter-network:
    driver: bridge
```

#### ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    coverletter-network                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Frontend   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   Backend   â”‚         â”‚
â”‚  â”‚  10.0.0.2   â”‚     HTTP/API       â”‚  10.0.0.3   â”‚         â”‚
â”‚  â”‚   Port 80   â”‚                    â”‚  Port 8000  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### í†µì‹  íë¦„
1. **ì™¸ë¶€ ìš”ì²­** â†’ Frontend Container (Port 80)
2. **API ìš”ì²­** â†’ Frontend Nginx â†’ Backend Container (Port 8000)
3. **ì •ì  íŒŒì¼** â†’ Frontend Nginx â†’ Static Files
4. **í—¬ìŠ¤ì²´í¬** â†’ ê° ì»¨í…Œì´ë„ˆì˜ í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸

## ğŸ’¾ ë³¼ë¥¨ ê´€ë¦¬

### ë³¼ë¥¨ êµ¬ì¡°
```yaml
volumes:
  uploads_data:
    driver: local
  job_postings_data:
    driver: local
  cover_letters_data:
    driver: local
  chroma_db_data:
    driver: local
```

### ë³¼ë¥¨ ë§ˆìš´íŠ¸
```yaml
volumes:
  - uploads_data:/app/uploads
  - job_postings_data:/app/job_postings
  - cover_letters_data:/app/cover_letters
  - chroma_db_data:/app/chroma_db
```

### ë°ì´í„° ì˜ì†ì„± ì „ëµ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Data Persistence                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   uploads   â”‚  â”‚job_postings â”‚  â”‚cover_lettersâ”‚          â”‚
â”‚  â”‚   _data     â”‚  â”‚   _data     â”‚  â”‚   _data     â”‚          â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚          â”‚
â”‚  â”‚ PDF Files   â”‚  â”‚ Job Data    â”‚  â”‚ Cover       â”‚          â”‚
â”‚  â”‚ Temp Files  â”‚  â”‚ Metadata    â”‚  â”‚ Letters     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              chroma_db_data                         â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚ Vector Embeddings                                   â”‚    â”‚
â”‚  â”‚ Document Indexes                                    â”‚    â”‚
â”‚  â”‚ Metadata Storage                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°±ì—… ì „ëµ
```bash
# ìë™ ë°±ì—… ìŠ¤í¬ë¦½íŠ¸
make backup
# â†’ backups/YYYYMMDD_HHMMSS/ ë””ë ‰í† ë¦¬ì— ì••ì¶• íŒŒì¼ ìƒì„±
```

## ğŸ”§ í™˜ê²½ ë³€ìˆ˜

### í™˜ê²½ ë³€ìˆ˜ êµ¬ì¡°
```yaml
environment:
  - OPENAI_API_KEY=${OPENAI_API_KEY}
  - PYTHONPATH=/app
  - PYTHONUNBUFFERED=1
```

### í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ (.env)
```env
# OpenAI API ì„¤ì •
OPENAI_API_KEY=your_openai_api_key_here

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •
APP_ENV=production
DEBUG=false

# í¬íŠ¸ ì„¤ì •
BACKEND_PORT=8000
FRONTEND_PORT=80

# ë¡œê¹… ì„¤ì •
LOG_LEVEL=INFO
```

### í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ ì „ëµ
- **ê°œë°œ í™˜ê²½**: `.env` íŒŒì¼ ì‚¬ìš©
- **í”„ë¡œë•ì…˜ í™˜ê²½**: Docker Secrets ë˜ëŠ” í™˜ê²½ ë³€ìˆ˜ ì£¼ì…
- **ë³´ì•ˆ**: API í‚¤ëŠ” í™˜ê²½ ë³€ìˆ˜ë¡œ ë¶„ë¦¬

## ğŸ”¨ ë¹Œë“œ í”„ë¡œì„¸ìŠ¤

### Frontend ë¹Œë“œ í”„ë¡œì„¸ìŠ¤
```
1. Node.js Alpine ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
2. package.json ë³µì‚¬ ë° ì˜ì¡´ì„± ì„¤ì¹˜
3. ì†ŒìŠ¤ ì½”ë“œ ë³µì‚¬
4. npm run build ì‹¤í–‰
5. Nginx Alpine ì´ë¯¸ì§€ë¡œ ì „í™˜
6. ë¹Œë“œ ê²°ê³¼ë¬¼ì„ Nginxë¡œ ë³µì‚¬
7. Nginx ì„¤ì • íŒŒì¼ ë³µì‚¬
8. ìµœì¢… ì´ë¯¸ì§€ ìƒì„±
```

### Backend ë¹Œë“œ í”„ë¡œì„¸ìŠ¤
```
1. Python 3.11 Slim ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
2. ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸ ë° ì„¤ì¹˜
3. requirements.txt ë³µì‚¬ ë° Python íŒ¨í‚¤ì§€ ì„¤ì¹˜
4. ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ ë³µì‚¬
5. í•„ìš”í•œ ë””ë ‰í† ë¦¬ ìƒì„±
6. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
7. ìµœì¢… ì´ë¯¸ì§€ ìƒì„±
```

### .dockerignore ìµœì í™”
```
# ì œì™¸ë˜ëŠ” íŒŒì¼ë“¤
- Git ê´€ë ¨ íŒŒì¼ë“¤
- ìºì‹œ ë””ë ‰í† ë¦¬ë“¤
- ê°€ìƒí™˜ê²½
- IDE ì„¤ì • íŒŒì¼ë“¤
- ë¡œê·¸ íŒŒì¼ë“¤
- ì„ì‹œ íŒŒì¼ë“¤
- AI ë„êµ¬ ê´€ë ¨ íŒŒì¼ë“¤
- ê°œì¸ íŒŒì¼ë“¤
```

## ğŸš€ ë°°í¬ ì „ëµ

### ê°œë°œ í™˜ê²½
```bash
# ê°œë°œ ëª¨ë“œ ì‹¤í–‰
make dev

# ë¡œê·¸ ì‹¤ì‹œê°„ í™•ì¸
make logs
```

### í”„ë¡œë•ì…˜ í™˜ê²½
```bash
# í”„ë¡œë•ì…˜ ëª¨ë“œ ì‹¤í–‰
make prod

# ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
docker-compose up -d
```

### ìŠ¤ì¼€ì¼ë§ ì „ëµ
```yaml
# docker-compose.override.yml (ê°œë°œìš©)
services:
  backend:
    deploy:
      replicas: 1
  frontend:
    deploy:
      replicas: 1

# docker-compose.prod.yml (í”„ë¡œë•ì…˜ìš©)
services:
  backend:
    deploy:
      replicas: 3
      resources:
        limits:
          memory: 2G
        reservations:
          memory: 1G
  frontend:
    deploy:
      replicas: 2
```

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### í—¬ìŠ¤ì²´í¬
```yaml
healthcheck:
  test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
  interval: 30s
  timeout: 10s
  retries: 3
  start_period: 40s
```

### ë¡œê¹… ì „ëµ
```yaml
# Nginx ë¡œê·¸
access_log /var/log/nginx/access.log main;
error_log /var/log/nginx/error.log;

# Python ë¡œê·¸
logging:
  level: INFO
  format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
```

### ëª¨ë‹ˆí„°ë§ ëª…ë ¹ì–´
```bash
# ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
docker-compose ps

# ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ í™•ì¸
docker stats

# ë¡œê·¸ í™•ì¸
docker-compose logs -f

# í—¬ìŠ¤ì²´í¬ í™•ì¸
curl http://localhost:8000/health
curl http://localhost/health
```

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### ì»¨í…Œì´ë„ˆ ë³´ì•ˆ
```dockerfile
# ë¹„ë£¨íŠ¸ ì‚¬ìš©ì ì‹¤í–‰
RUN addgroup -g 1001 -S nodejs
RUN adduser -S nextjs -u 1001
USER nextjs

# ìµœì†Œ ê¶Œí•œ ì›ì¹™
RUN chmod 755 /app
RUN chown -R nextjs:nodejs /app
```

### ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ
```yaml
# ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬
networks:
  coverletter-network:
    driver: bridge
    internal: true  # ì™¸ë¶€ ì ‘ê·¼ ì œí•œ
```

### í™˜ê²½ ë³€ìˆ˜ ë³´ì•ˆ
```bash
# ë¯¼ê°í•œ ì •ë³´ëŠ” í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬
export OPENAI_API_KEY="your-secret-key"
docker-compose up -d
```

### ì´ë¯¸ì§€ ë³´ì•ˆ
```bash
# ë² ì´ìŠ¤ ì´ë¯¸ì§€ ì •ê¸° ì—…ë°ì´íŠ¸
docker pull python:3.11-slim
docker pull node:18-alpine
docker pull nginx:alpine

# ì·¨ì•½ì  ìŠ¤ìº”
docker scan coverletter-backend
docker scan coverletter-frontend
```

## âš¡ ì„±ëŠ¥ ìµœì í™”

### ì´ë¯¸ì§€ í¬ê¸° ìµœì í™”
```dockerfile
# ë©€í‹°ìŠ¤í…Œì´ì§€ ë¹Œë“œë¡œ ìµœì¢… ì´ë¯¸ì§€ í¬ê¸° ê°ì†Œ
# ë¶ˆí•„ìš”í•œ íŒŒì¼ ì œê±°
# ë ˆì´ì–´ ìºì‹± ìµœì í™”
```

### ë¹Œë“œ ìºì‹±
```yaml
# Docker BuildKit ì‚¬ìš©
DOCKER_BUILDKIT=1 docker-compose build

# ìºì‹œ í™œìš©
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
```

### ë¦¬ì†ŒìŠ¤ ì œí•œ
```yaml
services:
  backend:
    deploy:
      resources:
        limits:
          memory: 2G
          cpus: '1.0'
        reservations:
          memory: 1G
          cpus: '0.5'
```

### Nginx ìµœì í™”
```nginx
# Gzip ì••ì¶•
gzip on;
gzip_vary on;
gzip_min_length 1024;
gzip_comp_level 6;

# ìºì‹œ ì„¤ì •
location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
}
```

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

#### í¬íŠ¸ ì¶©ëŒ
```bash
# ì‚¬ìš© ì¤‘ì¸ í¬íŠ¸ í™•ì¸
lsof -i :80
lsof -i :8000

# í¬íŠ¸ ë³€ê²½
docker-compose up -p 8080:80 -p 8081:8000
```

#### ë©”ëª¨ë¦¬ ë¶€ì¡±
```bash
# Docker ë¦¬ì†ŒìŠ¤ ì¦ê°€
# Docker Desktop â†’ Settings â†’ Resources â†’ Memory

# ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
docker-compose restart
```

#### ê¶Œí•œ ë¬¸ì œ
```bash
# ë³¼ë¥¨ ê¶Œí•œ ìˆ˜ì •
sudo chown -R $USER:$USER ./uploads
sudo chown -R $USER:$USER ./job_postings
```

#### ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ
```bash
# ë„¤íŠ¸ì›Œí¬ ì¬ìƒì„±
docker-compose down
docker network prune
docker-compose up
```

## ğŸ“ˆ í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

### ìˆ˜í‰ í™•ì¥
```yaml
# ë°±ì—”ë“œ ì„œë¹„ìŠ¤ í™•ì¥
docker-compose up --scale backend=3

# ë¡œë“œ ë°¸ëŸ°ì„œ ì¶”ê°€
services:
  nginx-lb:
    image: nginx:alpine
    ports:
      - "80:80"
    volumes:
      - ./nginx-lb.conf:/etc/nginx/nginx.conf
```

### ìˆ˜ì§ í™•ì¥
```yaml
# ë¦¬ì†ŒìŠ¤ ì¦ê°€
services:
  backend:
    deploy:
      resources:
        limits:
          memory: 4G
          cpus: '2.0'
```

### ë°ì´í„°ë² ì´ìŠ¤ ë¶„ë¦¬
```yaml
# ì™¸ë¶€ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
services:
  backend:
    environment:
      - DATABASE_URL=postgresql://user:pass@host:5432/db
```

ì´ ë¬¸ì„œëŠ” Docker ì»¨í…Œì´ë„ˆí™”ì˜ ëª¨ë“  ì¸¡ë©´ì„ ë‹¤ë£¨ë©°, ê°œë°œìë“¤ì´ ì‹œìŠ¤í…œì„ ì´í•´í•˜ê³  ìœ ì§€ë³´ìˆ˜í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.
